{"name":"BadgeR","tagline":"Achievement engine with annotation support","body":"# BadgeR achievement engine Overview#\r\n\r\nBadgeR is a java based achievement engine.\r\n\r\n* It makes achiement registration and handling easier\r\n* Developers can separate achivement operations from production code with the provided annotations\r\n* It needs only one file for achievement declaration and language (i18n) files for internationalization\r\n\r\n## Features ##\r\n\r\n* **Annotation driven**\r\n\r\nYou can avoid mixing the achievement related codes with the real functional codes.\r\n\r\n|Annotation|Function|\r\n|:-----|:-----|\r\n|`@AchievementEventTrigger`|Triggers a defined event by incrementing the event counter by one and checks for possible unlocked achievements|\r\n|`@AchievementScore`|Triggers a defined event by setting the event counter by the given score and checks for possible unlocked achievements|\r\n|`@AchievementCheck`|Checks for possible unlocked achievements|\r\n|`@AchievementUnlock`|Unlock achievement manually|\r\n\r\n* **Easy achievement definition**\r\n\r\nAchievements can be given with a single ini file.\r\nThere are only few conventions to follow:\r\n\r\n1. All achievements should have a type\r\n2. Achievement should have a unique id within a type\r\n3. If there are more than one achievement with the same id with different types there should be a relation defined.\r\n\r\nThere are 5 predefined achievement types which can be used to define a the unlock behavior of the achievement:\r\n\r\n|Type|Description|\r\n|:------|:-----|\r\n|**single**|Achievement with no triggers. They can be unlocked by directly telling to unlock.|\r\n|**counter**|Achievements with score based triggers. These achievements are bonded with the defined events. Event counters can be incremented by one or with a given score.|\r\n|**date**|Achievements with date trigger. These achievements are bonded with the defined events. If one of the given events are triggered within (one of) the given day(s), the achievement will be unlocked.|\r\n|**time**|Achievements with time trigger. These achievements are bonded with the defined events. If one of the given events are triggered within (one of) the given minutes(s), the achievement will be unlocked.|\r\n|**timeRange**|Achievements with time trigger. These achievements are bonded with the defined events. If one of the given events are triggered within the given time ranges the achievement will be unlocked.|\r\n\r\n* **Get notified of unlocked achivements or updated events**\r\nBadger will notify every time when an achievement is unlocked or a counter is updated.\r\n\r\nTo subscribe just implement a handler and pass is to Badger. See more at usage section.\r\n\r\n# Usage #\r\n\r\n## 1.  Achievement definition ##\r\n\r\nThere are Two sections which are not directly defining the achievement but the events (or counters) and optionally the relation between achievements.\r\n\r\n### 1.1. Events ###\r\n\r\nMost of the achievements (single achievements not) should be subscribe one or more events. If an event is triggered all BadgeR will check for unlock from all the subscribed achievements\r\nAll the events are also a counter. They can be triggered with a concrete value.\r\n```\r\n[events]\r\nevent=level completed\r\nevent=earned score per level\r\n```\r\n\r\n### 1.2. Relations ###\r\n\r\nThere is an option to create complex achievements by making multiple diffferent typed achiecements with the same ID and telling the relationship between them.\r\n In the \"relations\" section you can add the relation definition of the achievements with same ID. There should be only one relation definition for an achievement Id.\r\nAllowed oprators are **&** (and) **|** (or) and simple brackets **(** and **)**. Make shure to use brackets for proper precedency evaluation.\r\n\r\n```\r\n[relations]\r\nachievementId= timeRange & counter\r\notherAchievementId= counter & (time | date)\r\n```\r\n\r\n### 1.3. Achievements ###\r\n\r\nAll Achievements have its own section.\r\nThe achievement section is defined with its type and its unique id: *[type/id]*\r\nWithin the section are the event subscriptions and the triggers.\r\n\r\n**1.3.1 Event subscriptions**\r\n\r\nAn achievement can subscribe for one or more events. By following the ini strucure multiple evet subscription should be given in multiple lines.\r\nMake sure that all event is defined in the **[events]** section!\r\n\r\n```\r\n[counter/sample]\r\nevent=event one\r\nevent=event two\r\nevent=event three\r\n\r\n```\r\n\r\n**1.3.1 Triggers**\r\n\r\nAn achievement can have multiple trigger definitions. Triggers are defined differently for every types.\r\nNote: Single achievements does not have any triggers.\r\n\r\n|Trigger|Properties|\r\n|:------|:-----|\r\n|**counter**|Should be given a number or a number post-fixed with '**+**' or '**-**'. (e.g.: 20- or 30 or 50+) With no post-fix: trigger will fire only when the counter is equal to the given number. With '+' post-fix the trigger will fire only when the counter is greater than the given number. With '-' post-fix the trigger will fire only when the counter is less thanthe given number.|\r\n|**date**|Should be given with pattern ***MM-dd*** (e.g.: 12-24 is 24th of december)|\r\n|**time**|Should be given with pattern ***HH:mm*** (e.g.: 23:42)|\r\n|**timeRange**|Should be given even lines of triggers defined with the same pattern as the time trigger. All odd trigger will be a start trigger and all even triggers will be an end trigger. If the start time stamp is a time after the end trigger, they will be recognized as one trigger from the start trigger to midnight and another one from midnight to the end trigger. (e.g.: 20:00 - 08:00 will be used as 20:00 - 00:00 and 00:00 - 08:00)\r\n\r\n\r\n## **Examples** ##\r\n\r\n**Counter achievement examples**\r\n```\r\n[counter/sample]\r\nevent=my event\r\ntrigger=3\r\ntrigger=5\r\n```\r\n\r\nA counter achievement is defined with id \"sample\". Badger will check whether it can be unlocked or not if \"my event\" event is triggered. Achievement (level 1) will be unlocked if 'my event' was triggered 3 times all together. (Level 2 when it was triggered 5 times all together)\r\n\r\n```\r\n[counter/postfixsample]\r\nevent=my event\r\ntrigger=10-\r\ntrigger=20\r\ntrigger=30+\r\n```\r\n\r\nA counter achievement is defined with id \"postfixsample\". Badger will check whether it can be unlocked or not if \"my event\" event is triggered. Achievement (level 1) will be unlocked if the event is triggered with a score less than 10. If 'my event' is only triggered without any score, level 1 achievement will be unlocked because the counter will set automatically to 1 at the first time (in this case). Level 2 will be unlocked if the counter is equal to 20 and level 3 will be unlocked if the counter will be greater or equal to 30.\r\n\r\n**Date achievement examples**\r\n\r\n```\r\n[date/dateExample]\r\nevent=event1\r\nevent=event2\r\ntrigger=01-25\r\ntrigger=01-30\r\n```\r\n\r\nA date achievement is defined with id \"dateExample\". It will be unlocked if one of the given events ('event1' or 'event2') is triggered on the 25th or 30th of January (Doesn't matter which year).\r\n\r\n**Time achievement examples**\r\n\r\n```\r\n[date/timeExample]\r\nevent=event1\r\nevent=event2\r\ntrigger=08:00\r\ntrigger=20:00\r\n```\r\n\r\nA time achievement is defined with id \"timeExample\". It will be unlocked if one of the given events ('event1' or 'event2') is triggered at 08:00 or 20:00 (Doesn't matter which year, month or day).\r\n\r\n**Time range achievement examples**\r\n\r\n```\r\n[date/timeRangeExample]\r\nevent=event1\r\nevent=event2\r\ntrigger=08:00\r\ntrigger=20:00\r\ntrigger=21:00\r\ntrigger=07:00\r\n```\r\n\r\nA time achievement is defined with id \"timeRangeExample\". It will be unlocked if one of the given events ('event1' or 'event2') is triggered between 08:00 and 20:00, 21:00 and 00:00 or 00:00 and 07:00 (Doesn't matter which year, month or day).\r\n\r\n## 2. Internatiolazation, localization (i18n) ##\r\n\r\nThere is an option to get i18n messages directly when achievements are unlocked. For this you should create the i18n message properties and give the base name to Badger.\r\nFind some examples [here](https://docs.oracle.com/javase/tutorial/i18n/intro/steps.html)\r\n\r\nBy following BangeR convention to give messages with key *achieventId* **.title** and *achieventId* **.text** in the messages properties file BadgeR will give directly the resolved messages in the achievement information. \r\n\r\nBadgeR's locale can be changed at any time or just let it to use the default locale of your JVM.\r\n\r\n## 3. Wire into code ##\r\n\r\n### 3.1 Instantiate BadgeR ###\r\nCreate only** one instance** of BadgeR\r\n\r\nThe following example requires an achievement definition file 'achievements.ini' and i18n messages properties files starting with achievementsMsg (e.g.: achievementsMsg_en.properties)\r\n\r\n```\r\nfinal InputStream inStream = getClass().getClassLoader().getResourceAsStream(\"achievements.ini\");\r\nfinal Badger badger = new Badger(inStream, \"achievementsMsg\");\r\n```\r\n\r\n### 3.1 Subscribe for BadgeR events ###\r\n\r\nSubscribe for unlock events with a simple callback method.\r\n\r\n```\r\nbadger.subscribeOnUnlock(new IAchievementUnlockedHandler() {\r\n    @Override\r\n    public void onUnlocked(final Achievement achievement) {\r\n        final String title = achievement.getTitle(); // localized title\r\n        final String text = achievement.getText();  // localized description\r\n        final Integer level = achievement.getLevel(); // unlocked level\r\n        final Date acquireDate = achievement.getAcquireDate(); // unlock time stamp\r\n        final String triggerValue = achievement.getTriggerValue(); // submitted value which unlocked the achievement\r\n\r\n        // show achievement notification\r\n    }\r\n});\r\n```\r\n\r\nwith lambda expression\r\n\r\n\r\n```\r\nbadger.subscribeOnUnlock((IAchievementUnlockedHandler) achievement -> {\r\n    final String title = achievement.getTitle(); // localized title\r\n    final String text = achievement.getText();  // localized description\r\n    final Integer level = achievement.getLevel(); // unlocked level\r\n    final Date acquireDate = achievement.getAcquireDate(); // unlock time stamp\r\n    final String triggerValue = achievement.getTriggerValue(); // submitted value which unlocked the achievement\r\n\r\n    // show achievement notification\r\n} );\r\n```\r\n\r\n### 3.1 Trigger events ###\r\n\r\n**Simple trigger**\r\n\r\nTrigger an event and increment its counter by one.\r\n\r\n```\r\n@AchievementEventTrigger(name = \"myEvent\")\r\npublic void myMethod() {\r\n    // doesn't matter what the method do, only that it is called.\r\n}\r\n```\r\n\r\nequivalent with \r\n\r\n```\r\nbadger.triggerEvent(\"myEvent\");\r\n```\r\n\r\n**Score trigger**\r\n\r\nTrigger an event and set the counter score.\r\n\r\n```\r\n@AchievementScore(counter = \"myEvent\")\r\npublic void myMethod(final @AchievementScoreParam Long newScore) {\r\n    // doesn't matter what the method do, only that it is called.\r\n}\r\n```\r\n\r\nequivalent with \r\n\r\n```\r\nfinal Long newScore = 100L; // the new score to be set\r\nbadger.triggerEvent(\"myEvent\", newScore);\r\n```\r\n\r\nYou can retrieve score value from an Object argument by telling the getter method for it. It can be useful when the annotated methods are event receivers or some other methods with complex type arguments.\r\n\r\n```\r\n@AchievementScore(counter = \"myEvent\")\r\npublic void myMethod(final @AchievementScoreParam(getter = \"getHighscore\") Player player) {\r\n    // doesn't matter what the method do, only that it is called.\r\n}\r\n```\r\n\r\nequivalent with \r\n\r\n```\r\nbadger.triggerEvent(\"myEvent\", player.getHighscore());\r\n```\r\n**Unlock achievement directly**\r\n\r\nAchievements can be unlocked directly.\r\n\r\nThe type, id of the achievement should be given and optionally a trigger/score value as a String can be stored. The given \"triggerValue\" will not be evaluated, it will be stored only to provide information during unlock procedure.\r\n\r\nAchievements without trigger can be only unlocked with the following way:\r\n\r\n```\r\n// unlock single achievement with id 'achievementId' that has no triggers\r\n@AchievementUnlock(type = AchievementType.SINGLE, achievement = \"achievementId\")\r\npublic void myMethod1() {\r\n    // doesn't matter what the method do, only that it is called.\r\n}\r\n\r\n// unlock single achievement with id 'achievementId' that has no triggers and provide unlock information\r\n@AchievementUnlock(type = AchievementType.SINGLE, achievement = \"achievementId\", triggerValue = \"special thing happened\")\r\npublic void myMethod2() {\r\n    // doesn't matter what the method do, only that it is called.\r\n}\r\n\r\n// unlock counter achievement with id 'achievementId' with value 10\r\n@AchievementUnlock(type = AchievementType.COUNTER, achievement = \"achievementId\", triggerValue = \"10\")\r\npublic void myMethod3() {\r\n    // doesn't matter what the method do, only that it is called.\r\n}\r\n\r\n// unlock date achievement with id 'achievementId' with value/date 30th of January\r\n@AchievementUnlock(type = AchievementType.DATE, achievement = \"achievementId\", triggerValue = \"01-30\")\r\npublic void myMethod4() {\r\n    // doesn't matter what the method do, only that it is called.\r\n}\r\n```\r\n\r\nequivalent with \r\n\r\n```\r\n// unlock single achievement with id 'achievementId' that has no triggers\r\nbadger.unlock(AchievementType.SINGLE, \"achievementId\");\r\n\r\n// unlock single achievement with id 'achievementId' that has no triggers and provide unlock information\r\nbadger.unlock(AchievementType.SINGLE, \"achievementId\", \"special thing happened\");\r\n\r\n// unlock counter achievement with id 'achievementId' with value 10\r\nbadger.unlock(AchievementType.COUNTER, \"achievementId\", \"10\");\r\n\r\n// unlock date achievement with id 'achievementId' with value/date 30th of January\r\nbadger.unlock(AchievementType.DATE, \"achievementId\", \"01-30\");\r\n```\r\n\r\n**Check for unlocked achievements**\r\n\r\nAchievement check runs every time when an event is triggered. Nevertheless the checking can be done directly.\r\n\r\n```\r\n@AchievementCheck\r\npublic void myMethod() {\r\n    // doesn't matter what the method do, only that it is called.\r\n}\r\n```\r\n\r\nequivalent with \r\n\r\n\r\n```\r\nbadger.check();\r\n```\r\n\r\n# Make it work #\r\n\r\nTo enable annotation driven features make sure you use AspectJ veawing.\r\n\r\nHere is my maven example from my other project where I use BadgeR:\r\n\r\n```\r\n<plugin>\r\n    <groupId>org.codehaus.mojo</groupId>\r\n    <artifactId>aspectj-maven-plugin</artifactId>\r\n    <version>1.7</version>\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.aspectj</groupId>\r\n            <artifactId>aspectjrt</artifactId>\r\n            <version>1.8.5</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.aspectj</groupId>\r\n            <artifactId>aspectjtools</artifactId>\r\n            <version>1.8.5</version>\r\n        </dependency>\r\n    </dependencies>\r\n    <executions>\r\n        <execution>\r\n            <phase>process-classes</phase>\r\n            <goals>\r\n                <goal>compile</goal>\r\n                <goal>test-compile</goal>\r\n            </goals>\r\n        </execution>\r\n    </executions>\r\n    <configuration>\r\n        <showWeaveInfo>false</showWeaveInfo>\r\n        <verbose>true</verbose>\r\n        <complianceLevel>1.8</complianceLevel>\r\n        <weaveDependencies>\r\n            <weaveDependency>\r\n                <groupId>badger</groupId>\r\n                <artifactId>badger</artifactId>\r\n            </weaveDependency>\r\n        </weaveDependencies>\r\n        <aspectLibraries>\r\n            <dependency>\r\n                <groupId>org.aspectj</groupId>\r\n                <artifactId>aspectjrt</artifactId>\r\n            </dependency>\r\n        </aspectLibraries>\r\n        <source>1.8</source>\r\n        <target>1.8</target>\r\n    </configuration>\r\n</plugin>\r\n```\r\n\r\n\r\n## Author ##\r\n\r\n**Peter Csongrady**\r\n\r\n[csongrady.p@gmail.com](csongrady.p@gmail.com)\r\n\r\n[LinkedIn profile](hu.linkedin.com/in/csongradyp)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}